<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.mapper.TeachersMapper">
	<select id="findTeachersList"  resultType="Teachers">
		select * from teachers 
	</select>
	
	<select id="query" parameterType="java.util.Map" resultType="Teachers">
	    select  *  
        from teachers a  	
		<where>
      		<if test="tno != null and tno != ''">
		    and a.tno = #{tno}
		</if>
		<if test="password != null and password != ''">
		    and a.password = #{password}
		</if>
		<if test="tname != null and tname != ''">
		    and a.tname = #{tname}
		</if>
		<if test="gender != null and gender != ''">
		    and a.gender = #{gender}
		</if>
		<if test="phone != null and phone != ''">
		    and a.phone = #{phone}
		</if>
		<if test="email != null and email != ''">
		    and a.email = #{email}
		</if>
		<if test="avatar != null and avatar != ''">
		    and a.avatar = #{avatar}
		</if>
		<if test="addtime != null and addtime != ''">
		    and a.addtime = #{addtime}
		</if>
		<if test="condition != null and condition != ''">
		    ${condition} 
		</if>

    </where>

    order by ${sort} tno desc

    <if test="page">
			limit #{offset} ,#{pageSize}
		</if>
	</select>	
	
	<select id="getCount" parameterType="java.util.Map" resultType="Int">
		select count(0) from teachers a  
		<where>
      		<if test="tno != null and tno != ''">
		    and a.tno = #{tno}
		</if>
		<if test="password != null and password != ''">
		    and a.password = #{password}
		</if>
		<if test="tname != null and tname != ''">
		    and a.tname = #{tname}
		</if>
		<if test="gender != null and gender != ''">
		    and a.gender = #{gender}
		</if>
		<if test="phone != null and phone != ''">
		    and a.phone = #{phone}
		</if>
		<if test="email != null and email != ''">
		    and a.email = #{email}
		</if>
		<if test="avatar != null and avatar != ''">
		    and a.avatar = #{avatar}
		</if>
		<if test="addtime != null and addtime != ''">
		    and a.addtime = #{addtime}
		</if>
		<if test="condition != null and condition != ''">
		    ${condition} 
		</if>

    </where>
	</select>	
	
	<select id="queryTeachersById" parameterType="String" resultType="Teachers">
    select  *  
     from teachers a  	 where a.tno=#{value}
  </select>
 
	<insert id="insertTeachers" useGeneratedKeys="true" keyProperty="tno" parameterType="Teachers">
    insert into teachers
    (tno,password,tname,gender,phone,email,avatar,addtime)
    values
    (#{tno},#{password},#{tname},#{gender},#{phone},#{email},#{avatar},now());
  </insert>
	
	<update id="updateTeachers" parameterType="Teachers" >
    update teachers 
    <set>
		<if test="tno != null and tno != ''">
		    tno = #{tno},
		</if>
		<if test="password != null and password != ''">
		    password = #{password},
		</if>
		<if test="tname != null and tname != ''">
		    tname = #{tname},
		</if>
		<if test="gender != null and gender != ''">
		    gender = #{gender},
		</if>
		<if test="phone != null and phone != ''">
		    phone = #{phone},
		</if>
		<if test="email != null and email != ''">
		    email = #{email},
		</if>
		<if test="avatar != null and avatar != ''">
		    avatar = #{avatar},
		</if>
		<if test="addtime != null and addtime != ''">
		    addtime = #{addtime},
		</if>

    </set>
   <where> 
    <if test="condition != null and condition != ''">
      ${condition}
    </if>
    <if test="tno != null or tno != ''">
      tno=#{tno}
    </if>
   </where>     
  </update>	
 
	
	<delete id="deleteTeachers" parameterType="String">
    delete from  teachers where tno=#{value}
  </delete>

	
	
</mapper>

 
