<?xml version="1.0" encoding="utf-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" 
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.mapper.TestrecordsMapper">
	<select id="findTestrecordsList"  resultType="Testrecords">
		select * from testrecords 
	</select>
	
	<select id="query" parameterType="java.util.Map" resultType="Testrecords">
	    select  *  
        from testrecords a  left join course b on a.cid=b.cid  	
		<where>
      		<if test="id != null and id !=0 ">
		    and a.id = #{id}
		</if>
		<if test="cid != null and cid !=0 ">
		    and a.cid = #{cid}
		</if>
		<if test="sno != null and sno != ''">
		    and a.sno = #{sno}
		</if>
		<if test="questioncount != null and questioncount !=0 ">
		    and a.questioncount = #{questioncount}
		</if>
		<if test="correctcount != null and correctcount !=0 ">
		    and a.correctcount = #{correctcount}
		</if>
		<if test="errorcount != null and errorcount !=0 ">
		    and a.errorcount = #{errorcount}
		</if>
		<if test="testtime != null and testtime != ''">
		    and a.testtime = #{testtime}
		</if>
		<if test="condition != null and condition != ''">
		    ${condition} 
		</if>

    </where>

    order by ${sort} id desc

    <if test="page">
			limit #{offset} ,#{pageSize}
		</if>
	</select>	
	
	<select id="getCount" parameterType="java.util.Map" resultType="Int">
		select count(0) from testrecords a  left join course b on a.cid=b.cid  
		<where>
      		<if test="id != null and id !=0 ">
		    and a.id = #{id}
		</if>
		<if test="cid != null and cid !=0 ">
		    and a.cid = #{cid}
		</if>
		<if test="sno != null and sno != ''">
		    and a.sno = #{sno}
		</if>
		<if test="questioncount != null and questioncount !=0 ">
		    and a.questioncount = #{questioncount}
		</if>
		<if test="correctcount != null and correctcount !=0 ">
		    and a.correctcount = #{correctcount}
		</if>
		<if test="errorcount != null and errorcount !=0 ">
		    and a.errorcount = #{errorcount}
		</if>
		<if test="testtime != null and testtime != ''">
		    and a.testtime = #{testtime}
		</if>
		<if test="condition != null and condition != ''">
		    ${condition} 
		</if>

    </where>
	</select>	
	
	<select id="queryTestrecordsById" parameterType="int" resultType="Testrecords">
    select  *  
     from testrecords a  left join course b on a.cid=b.cid  	 where a.id=#{value}
  </select>
 
	<insert id="insertTestrecords" useGeneratedKeys="true" keyProperty="id" parameterType="Testrecords">
    insert into testrecords
    (cid,sno,questioncount,correctcount,errorcount,score,testtime)
    values
    (#{cid},#{sno},#{questioncount},#{correctcount},#{errorcount},#{score},now());
  </insert>
	
	<update id="updateTestrecords" parameterType="Testrecords" >
    update testrecords 
    <set>
		<if test="cid != null ">
		    cid = #{cid},
		</if>
		<if test="sno != null and sno != ''">
		    sno = #{sno},
		</if>
		<if test="questioncount != null ">
		    questioncount = #{questioncount},
		</if>
		<if test="correctcount != null ">
		    correctcount = #{correctcount},
		</if>
		<if test="errorcount != null ">
		    errorcount = #{errorcount},
		</if>
		<if test="score != null ">
		    score = #{score},
		</if>
		<if test="testtime != null and testtime != ''">
		    testtime = #{testtime},
		</if>

    </set>
   <where> 
    <if test="condition != null and condition != ''">
      ${condition}
    </if>
    <if test="id != null or id != ''">
      id=#{id}
    </if>
   </where>     
  </update>	
 
	
	<delete id="deleteTestrecords" parameterType="int">
    delete from  testrecords where id=#{value}
  </delete>

	
	
</mapper>

 
